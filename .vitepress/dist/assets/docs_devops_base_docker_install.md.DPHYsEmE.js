import{_ as n,c as a,o as e,ag as l}from"./chunks/framework.Ds6Eueu6.js";const u=JSON.parse('{"title":"Docker","description":"","frontmatter":{},"headers":[{"level":1,"title":"Docker","slug":"Docker","link":"#Docker","children":[{"level":2,"title":"Linux上Docker部署及使用","slug":"Linux%E4%B8%8ADocker%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8","link":"#Linux%E4%B8%8ADocker%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8","children":[{"level":3,"title":"一、环境准备","slug":"%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87","link":"#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87","children":[]},{"level":3,"title":"二、卸载已有docker","slug":"%E4%BA%8C%E3%80%81%E5%8D%B8%E8%BD%BD%E5%B7%B2%E6%9C%89docker","link":"#%E4%BA%8C%E3%80%81%E5%8D%B8%E8%BD%BD%E5%B7%B2%E6%9C%89docker","children":[]},{"level":3,"title":"三、安装docker","slug":"%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85docker","link":"#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85docker","children":[{"level":4,"title":"3.1 配置docker yum源","slug":"3.1%20%E9%85%8D%E7%BD%AEdocker%20yum%E6%BA%90","link":"#3.1%20%E9%85%8D%E7%BD%AEdocker%20yum%E6%BA%90","children":[]},{"level":4,"title":"3.2 安装docker","slug":"3.2%20%E5%AE%89%E8%A3%85docker","link":"#3.2%20%E5%AE%89%E8%A3%85docker","children":[]},{"level":4,"title":"3.3 安装docker-compose","slug":"3.3%20%E5%AE%89%E8%A3%85docker-compose","link":"#3.3%20%E5%AE%89%E8%A3%85docker-compose","children":[]}]}]}]}],"relativePath":"docs/devops/base/docker/install.md","filePath":"docs/devops/base/docker/install.md","lastUpdated":null}'),p={name:"docs/devops/base/docker/install.md"};function o(r,s,c,t,i,d){return e(),a("div",null,s[0]||(s[0]=[l(`<h1 id="Docker" tabindex="-1">Docker <a class="header-anchor" href="#Docker" aria-label="Permalink to &quot;Docker&quot;">​</a></h1><h2 id="Linux%E4%B8%8ADocker%E9%83%A8%E7%BD%B2%E5%8F%8A%E4%BD%BF%E7%94%A8" tabindex="-1">Linux上Docker部署及使用 <a class="header-anchor" href="#Linux上Docker部署及使用" aria-label="Permalink to &quot;Linux上Docker部署及使用&quot;">​</a></h2><h3 id="%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87" tabindex="-1">一、环境准备 <a class="header-anchor" href="#一、环境准备" aria-label="Permalink to &quot;一、环境准备&quot;">​</a></h3><blockquote><ul><li>CentOS 7.9</li><li>Docker 26.1.4</li><li>docker-compose 1.18.0</li></ul></blockquote><h3 id="%E4%BA%8C%E3%80%81%E5%8D%B8%E8%BD%BD%E5%B7%B2%E6%9C%89docker" tabindex="-1">二、卸载已有docker <a class="header-anchor" href="#二、卸载已有docker" aria-label="Permalink to &quot;二、卸载已有docker&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#59873A;">yum</span><span style="color:#B56959;"> remove</span><span style="color:#A65E2B;"> -y</span><span style="color:#B56959;"> docker</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-client</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-client-latest</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-common</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-latest</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-latest-logrotate</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-logrotate</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-selinux</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-engine-selinux</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#B56959;">                  docker-engine</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>或者</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#59873A;">sudo</span><span style="color:#B56959;"> yum</span><span style="color:#B56959;"> remove</span><span style="color:#B56959;"> docker</span><span style="color:#A65E2B;"> \\</span></span>
<span class="line"><span style="color:#393A34;">docker-common </span><span style="color:#A65E2B;">\\</span></span>
<span class="line"><span style="color:#393A34;">container-selinux </span><span style="color:#A65E2B;">\\</span></span>
<span class="line"><span style="color:#393A34;">docker-selinux </span><span style="color:#A65E2B;">\\</span></span>
<span class="line"><span style="color:#393A34;">docker-engine</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>卸载docker后,/var/lib/docker/目录下会保留原Docker的镜像,网络,存储卷等文件. 如果需要全新安装Docker,需要删除/var/lib/docker/目录</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#59873A;">rm</span><span style="color:#A65E2B;"> -rf</span><span style="color:#B56959;"> /var/lib/docker/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></blockquote><h3 id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85docker" tabindex="-1">三、安装docker <a class="header-anchor" href="#三、安装docker" aria-label="Permalink to &quot;三、安装docker&quot;">​</a></h3><h4 id="3.1%20%E9%85%8D%E7%BD%AEdocker%20yum%E6%BA%90" tabindex="-1">3.1 配置docker yum源 <a class="header-anchor" href="#3.1 配置docker yum源" aria-label="Permalink to &quot;3.1 配置docker yum源&quot;">​</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;"># 查看是否已安装了docker，未安装则查询不出结果</span></span>
<span class="line"><span style="color:#59873A;">yum</span><span style="color:#B56959;"> list</span><span style="color:#B56959;"> installed</span><span style="color:#AB5959;"> |</span><span style="color:#59873A;"> grep</span><span style="color:#B56959;"> docker</span></span>
<span class="line"><span style="color:#A0ADA0;"># 使用yum安装yum-utils工具包</span></span>
<span class="line"><span style="color:#59873A;">yum</span><span style="color:#B56959;"> install</span><span style="color:#A65E2B;"> -y</span><span style="color:#B56959;"> yum-utils</span></span>
<span class="line"><span style="color:#A0ADA0;"># 设置国内的阿里云镜像仓库</span></span>
<span class="line"><span style="color:#59873A;">yum-config-manager</span><span style="color:#A65E2B;"> --add-repo</span><span style="color:#B56959;"> http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>配置docker镜像源地址：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#59873A;">tee</span><span style="color:#B56959;"> /etc/docker/daemon.json</span><span style="color:#AB5959;"> &lt;&lt;-</span><span style="color:#B5695977;">&#39;EOF&#39;</span></span>
<span class="line"><span style="color:#B56959;">{</span></span>
<span class="line"><span style="color:#B56959;">    &quot;registry-mirrors&quot;: [</span></span>
<span class="line"><span style="color:#B56959;">        &quot;https://1nj0zren.mirror.aliyuncs.com&quot;,</span></span>
<span class="line"><span style="color:#B56959;">        &quot;https://docker.mirrors.ustc.edu.cn&quot;,</span></span>
<span class="line"><span style="color:#B56959;">        &quot;http://f1361db2.m.daocloud.io&quot;,</span></span>
<span class="line"><span style="color:#B56959;">        &quot;https://registry.docker-cn.com&quot;</span></span>
<span class="line"><span style="color:#B56959;">    ]</span></span>
<span class="line"><span style="color:#B56959;">}</span></span>
<span class="line"><span style="color:#B5695977;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> daemon-reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="3.2%20%E5%AE%89%E8%A3%85docker" tabindex="-1">3.2 安装docker <a class="header-anchor" href="#3.2 安装docker" aria-label="Permalink to &quot;3.2 安装docker&quot;">​</a></h4><p>安装docker</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;"># 查看所有可用的docker版本:</span></span>
<span class="line"><span style="color:#59873A;">yum</span><span style="color:#B56959;"> list</span><span style="color:#B56959;"> docker-ce</span><span style="color:#A65E2B;"> --showduplicates</span><span style="color:#AB5959;"> |</span><span style="color:#59873A;"> sort</span><span style="color:#A65E2B;"> -r</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">yum</span><span style="color:#A65E2B;"> -y</span><span style="color:#B56959;"> install</span><span style="color:#B56959;">  docker-ce-26.1.4-1.el7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">docker</span><span style="color:#B56959;"> version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;"># 安装docker命令补全工具：</span></span>
<span class="line"><span style="color:#59873A;">yum</span><span style="color:#B56959;"> install</span><span style="color:#A65E2B;"> -y</span><span style="color:#B56959;"> bash-completion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>docker常用命令</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> status</span><span style="color:#B56959;"> docker</span></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> start</span><span style="color:#B56959;"> docker</span></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> restart</span><span style="color:#B56959;"> docker</span></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> stop</span><span style="color:#B56959;"> doceker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> enable</span><span style="color:#B56959;"> docker</span></span>
<span class="line"><span style="color:#59873A;">systemctl</span><span style="color:#B56959;"> disable</span><span style="color:#B56959;"> docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="3.3%20%E5%AE%89%E8%A3%85docker-compose" tabindex="-1">3.3 安装docker-compose <a class="header-anchor" href="#3.3 安装docker-compose" aria-label="Permalink to &quot;3.3 安装docker-compose&quot;">​</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki vitesse-light vp-code" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;"># docker-compose下载地址</span></span>
<span class="line"><span style="color:#59873A;">https://github.com/docker/compose/releases/download/v2.3.4/docker-compose-linux-x86_64</span></span>
<span class="line"><span style="color:#A0ADA0;"># 将下载好的安装包上传到服务器后，将文件移动到/usr/local/bin下，并改名为docker-compose</span></span>
<span class="line"><span style="color:#59873A;">mv</span><span style="color:#B56959;"> docker-compose-Linux-x86_64</span><span style="color:#B56959;"> /usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#A0ADA0;"># 添加docker-compose文件的执行权限</span></span>
<span class="line"><span style="color:#59873A;">chmod</span><span style="color:#B56959;"> +x</span><span style="color:#B56959;"> /usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#A0ADA0;"># 创建软链接</span></span>
<span class="line"><span style="color:#59873A;">ln</span><span style="color:#A65E2B;"> -s</span><span style="color:#B56959;"> /usr/local/bin/docker-compose</span><span style="color:#B56959;"> /usr/bin/docker-compose</span></span>
<span class="line"><span style="color:#A0ADA0;"># 查看docker-compose版本</span></span>
<span class="line"><span style="color:#59873A;">docker-compose</span><span style="color:#B56959;"> version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,21)]))}const y=n(p,[["render",o]]);export{u as __pageData,y as default};
